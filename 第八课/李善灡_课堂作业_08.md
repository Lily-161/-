# 课堂作业
   花20分钟时间，做以下练习与调研：
   * 练习存储过程、函数与触发器的定义与调用（不要完全照抄课件内容，照抄分数低）；
---
* 存储过程
## in代码与结果
 ```
 delimiter //
CREATE PROCEDURE SEARCH_password(IN p_password CHAR(20)) 
BEGIN
IF p_password is null or p_password='' THEN
SELECT * FROM t_user; 
ELSE
SELECT * FROM t_user WHERE USER_PASSWORD LIKE p_password; 
END IF; 
END //

delimiter ;
CALL SEARCH_password('1234567');
 ```

 ```
Query OK, 0 rows affected (0.06 sec)

mysql>
mysql> delimiter ;
mysql> CALL SEARCH_password('1234567');
+---------+-----------+---------------+----------------------+
| USER_ID | USER_NAME | USER_PASSWORD | USER_EMAIL           |
+---------+-----------+---------------+----------------------+
|       1 | 林炳文    | 1234567       | 1ing200810050126.com |
|       4 | fdasfdsaf | 1234567       | fsaf@126.com         |
|       7 | fdasfdsaf | 1234567       | fsaf@126.com         |
+---------+-----------+---------------+----------------------+
3 rows in set (0.02 sec)
```

---
## out代码与结果
```
mysql> delimiter //
mysql> CREATE PROCEDURE SEARCH_password2(IN p_password CHAR(20),OUT p_int CHAR(10) )
    -> BEGIN
    -> IF p_password is null or p_password='' THEN
    -> SELECT * FROM t_user;
    -> ELSE
    -> SELECT * FROM t_user WHERE USER_PASSWORD LIKE p_password;
    -> END IF;
    -> SELECT FOUND_ROWS() INTO p_int;
    -> END //
Query OK, 0 rows affected, 1 warning (0.01 sec)

mysql>
mysql> delimiter ;
mysql> CALL SEARCH_password2('1234567%',@p_num);
+---------+-----------+---------------+----------------------+
| USER_ID | USER_NAME | USER_PASSWORD | USER_EMAIL           |
+---------+-----------+---------------+----------------------+
|       1 | 林炳文    | 1234567       | 1ing200810050126.com |
|       4 | fdasfdsaf | 1234567       | fsaf@126.com         |
|       6 | fadafasf  | 12345678      | fdfas@126.com        |
|       7 | fdasfdsaf | 1234567       | fsaf@126.com         |
+---------+-----------+---------------+----------------------+
4 rows in set (0.00 sec)

Query OK, 1 row affected (0.04 sec)

mysql> SELECT @p_num;
+--------+
| @p_num |
+--------+
| 4      |
+--------+
1 row in set (0.00 sec)
```
## inout的结果
```
 delimiter //
mysql> CREATE PROCEDURE sp_inout2(INOUT p_num INT)
    -> BEGIN
    -> SET p_num=p_num*10+5;
    -> END //
Query OK, 0 rows affected (0.01 sec)

mysql>
mysql> delimiter ;
mysql>
mysql> SET @p_num=2;
Query OK, 0 rows affected (0.00 sec)

mysql> call sp_inout(@p_num);
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT @p_num;
+--------+
| @p_num |
+--------+
|     25 |
+--------+

1 row in set (0.00 sec)

```
